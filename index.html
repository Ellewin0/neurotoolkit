<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neuro-Empowerment University Toolkit</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: "Supportive Neutrals" -->
    <!-- Application Structure Plan: A multi-step, sequential "wizard" interface guides the user through four distinct phases: Profile, Strengths, Opportunities, and Strategies. This structure was chosen to reduce cognitive load and prevent overwhelm, which is critical for the neurodivergent target audience. It transforms a static worksheet into a guided journey of self-discovery. The flow is linear (Profile -> Strengths -> etc.) to build a foundation of self-awareness before moving to action planning. A persistent top navigation bar allows users to revisit previous steps, reinforcing that this is a reflective, non-linear process in practice. The final step generates a personalized, actionable summary plan. -->
    <!-- Visualization & Content Choices: 
    1. Report Info: Self-assessment of executive functions and sensory profiles. Goal: Provide a holistic, visual self-perception snapshot. Viz/Presentation: Interactive checklists feeding a Radar Chart (Chart.js). Interaction: User checks boxes, chart updates in real-time. Justification: A radar chart is excellent for showing multivariate data on a 2D plane, giving a quick, balanced view of one's cognitive profile without clinical jargon. Library/Method: Chart.js on a Canvas element.
    2. Report Info: Identifying personal strengths and challenges. Goal: Encourage reflective, qualitative input. Viz/Presentation: Text input fields that populate dynamic lists. Interaction: User types and adds items to "Strengths" and "Opportunities" lists. Justification: Simple, direct input is best for personal reflection. The dynamic lists provide immediate feedback and a sense of accomplishment. Library/Method: Vanilla JS DOM manipulation.
    3. Report Info: Mapping strategies to challenges. Goal: Provide targeted, actionable support. Viz/Presentation: A dynamically filtered list of "Strategy Cards". Interaction: Based on "Opportunities" the user listed, the app shows relevant strategy cards, which can be expanded for details and added to a personal plan. Justification: This is the core of the tool. Filtering avoids information overload by only showing relevant help. Expandable cards manage information density. Library/Method: Vanilla JS with data stored in objects.
    4. Report Info: Graded implementation plan. Goal: Translate insight into a concrete, manageable plan. Viz/Presentation: A structured, step-by-step text guide. Interaction: None; this is a clear, instructional section. Justification: A simple, clear text layout is most effective for conveying a sequence of actions. Library/Method: Styled HTML. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        .chart-container { position: relative; width: 100%; max-width: 500px; margin-left: auto; margin-right: auto; height: 300px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        .step-item.active { border-color: #3b82f6; color: #3b82f6; font-weight: 600; }
        .step-item.completed { border-color: #16a34a; color: #16a34a; }
        .step-item { transition: all 0.3s ease-in-out; }
        .btn-primary { background-color: #3b82f6; color: white; transition: background-color 0.3s; }
        .btn-primary:hover { background-color: #2563eb; }
        .btn-secondary { background-color: #6b7280; color: white; transition: background-color 0.3s; }
        .btn-secondary:hover { background-color: #4b5563; }
        textarea { resize: vertical; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div id="app" class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900">Neuro-Empowerment University Toolkit</h1>
            <p class="mt-2 text-lg text-gray-600">A personalized guide to understanding your unique mind and thriving at university.</p>
        </header>

        <nav id="steps-nav" class="mb-8 p-4 bg-white rounded-lg shadow-sm">
            <ol class="flex items-center justify-between w-full text-sm font-medium text-center text-gray-500">
                <li id="step-nav-1" class="step-item active flex items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-gray-200 after:border-1 after:hidden sm:after:inline-block after:mx-6 xl:after:mx-10">
                    <span class="flex items-center">1. Profile</span>
                </li>
                <li id="step-nav-2" class="step-item flex items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-gray-200 after:border-1 after:hidden sm:after:inline-block after:mx-6 xl:after:mx-10">
                    <span class="flex items-center">2. Strengths</span>
                </li>
                <li id="step-nav-3" class="step-item flex items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-gray-200 after:border-1 after:hidden sm:after:inline-block after:mx-6 xl:after:mx-10">
                    <span class="flex items-center">3. Opportunities</span>
                </li>
                 <li id="step-nav-4" class="step-item flex items-center after:content-[''] after:w-full after:h-1 after:border-b after:border-gray-200 after:border-1 after:hidden sm:after:inline-block after:mx-6 xl:after:mx-10">
                    <span class="flex items-center">4. Strategies</span>
                </li>
                <li id="step-nav-5" class="step-item">
                    5. My Plan
                </li>
            </ol>
        </nav>

        <main>
            <!-- Section 1: Profile -->
            <section id="section-1" class="space-y-6 bg-white p-6 rounded-lg shadow">
                <div class="prose max-w-none">
                    <h2 class="text-2xl font-semibold">Section 1: Understanding Your Neurodivergent Profile</h2>
                    <p>This section is not for diagnosis, but for self-reflection. It helps you create a visual snapshot of your cognitive and sensory profile. Think about your experiences at university and check the traits that resonate with you most strongly. This will help you understand your unique patterns.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
                    <div>
                        <h3 class="text-xl font-semibold mb-4">Cognitive & Executive Function Traits</h3>
                        <div id="cognitive-checklist" class="space-y-3"></div>
                    </div>
                    <div class="chart-container">
                        <canvas id="profileChart"></canvas>
                    </div>
                </div>
                 <div class="text-right">
                    <button onclick="goToSection(2)" class="btn-primary font-bold py-2 px-4 rounded-lg">Next: Identify Strengths &rarr;</button>
                </div>
            </section>

            <!-- Section 2: Strengths -->
            <section id="section-2" class="hidden space-y-6 bg-white p-6 rounded-lg shadow">
                 <div class="prose max-w-none">
                    <h2 class="text-2xl font-semibold">Section 2: Identifying Your Strengths</h2>
                    <p>Your neurodivergence comes with a unique set of superpowers. This section is dedicated to identifying and celebrating them. Think about what you're naturally good at, what you enjoy, and what others compliment you on. Don't be shy—list everything that comes to mind!</p>
                </div>
                <div>
                    <label for="strength-input" class="block text-lg font-medium mb-2">Add a strength:</label>
                    <div class="flex gap-2">
                        <input type="text" id="strength-input" class="flex-grow w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g., Creative problem-solving, hyperfocus on passions...">
                        <button onclick="addStrength()" class="btn-primary font-bold py-2 px-4 rounded-lg">Add</button>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-4">My Strengths:</h3>
                    <ul id="strengths-list" class="list-disc list-inside space-y-2 bg-blue-50 p-4 rounded-lg">
                        <li class="text-gray-500 italic">Your added strengths will appear here.</li>
                    </ul>
                </div>
                 <div class="flex justify-between">
                    <button onclick="goToSection(1)" class="btn-secondary font-bold py-2 px-4 rounded-lg">&larr; Back to Profile</button>
                    <button onclick="goToSection(3)" class="btn-primary font-bold py-2 px-4 rounded-lg">Next: Opportunities for Growth &rarr;</button>
                </div>
            </section>

            <!-- Section 3: Opportunities -->
            <section id="section-3" class="hidden space-y-6 bg-white p-6 rounded-lg shadow">
                <div class="prose max-w-none">
                    <h2 class="text-2xl font-semibold">Section 3: Recognizing Opportunities for Growth</h2>
                    <p>Everyone has areas where they can grow. Identifying these isn't about focusing on weaknesses, but about pinpointing where strategic support can make the biggest difference in your university life. Be honest and specific about the challenges you're currently facing.</p>
                </div>
                <div>
                    <label for="opportunity-input" class="block text-lg font-medium mb-2">Add an opportunity for growth:</label>
                    <div class="flex gap-2">
                        <input type="text" id="opportunity-input" class="flex-grow w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g., Starting long essays, group project communication...">
                        <button onclick="addOpportunity()" class="btn-primary font-bold py-2 px-4 rounded-lg">Add</button>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-4">My Opportunities for Growth:</h3>
                    <ul id="opportunities-list" class="list-disc list-inside space-y-2 bg-amber-50 p-4 rounded-lg">
                         <li class="text-gray-500 italic">Your added opportunities will appear here.</li>
                    </ul>
                </div>
                 <div class="flex justify-between">
                    <button onclick="goToSection(2)" class="btn-secondary font-bold py-2 px-4 rounded-lg">&larr; Back to Strengths</button>
                    <button onclick="goToSection(4)" class="btn-primary font-bold py-2 px-4 rounded-lg">Next: Find Strategies &rarr;</button>
                </div>
            </section>
            
            <!-- Section 4: Strategies -->
            <section id="section-4" class="hidden space-y-6 bg-white p-6 rounded-lg shadow">
                 <div class="prose max-w-none">
                    <h2 class="text-2xl font-semibold">Section 4: Strategies and Support</h2>
                    <p>Here are evidence-based strategies tailored to the opportunities you identified. This isn't a list of things you *must* do, but a toolbox of options to experiment with. Explore the suggestions and select the ones you want to try to build your personal action plan.</p>
                </div>
                <div id="strategies-container" class="space-y-4">
                    <p class="text-gray-600 text-center p-8 bg-gray-100 rounded-lg">Based on the opportunities you listed in the previous step, relevant strategies will appear here. Go back and add some to see suggestions!</p>
                </div>
                <div class="flex justify-between">
                    <button onclick="goToSection(3)" class="btn-secondary font-bold py-2 px-4 rounded-lg">&larr; Back to Opportunities</button>
                    <button onclick="goToSection(5)" class="btn-primary font-bold py-2 px-4 rounded-lg">Next: Create My Plan &rarr;</button>
                </div>
            </section>

            <!-- Section 5: My Plan -->
            <section id="section-5" class="hidden space-y-6 bg-white p-6 rounded-lg shadow">
                 <div class="prose max-w-none">
                    <h2 class="text-2xl font-semibold">My Neuro-Empowerment Plan</h2>
                    <p>This is your personalized summary. It brings together your self-reflections, strengths, and chosen strategies into a single, actionable plan. Below this summary, you'll find a graded plan for how to implement these strategies effectively over the semester. You can print this page or save it as a PDF for future reference.</p>
                </div>

                <div class="space-y-8">
                    <div>
                        <h3 class="text-xl font-semibold mb-2 border-b-2 border-blue-500 pb-2">My Profile Snapshot</h3>
                        <p class="text-gray-600">This radar chart visually represents the profile traits you selected.</p>
                        <div class="chart-container mt-4">
                            <canvas id="summaryChart"></canvas>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="text-xl font-semibold mb-2 border-b-2 border-green-500 pb-2">My Strengths</h3>
                        <div id="summary-strengths" class="p-4 bg-green-50 rounded-lg"></div>
                    </div>

                    <div>
                        <h3 class="text-xl font-semibold mb-2 border-b-2 border-amber-500 pb-2">My Opportunities for Growth</h3>
                        <div id="summary-opportunities" class="p-4 bg-amber-50 rounded-lg"></div>
                    </div>

                    <div>
                        <h3 class="text-xl font-semibold mb-2 border-b-2 border-indigo-500 pb-2">My Chosen Strategies</h3>
                        <div id="summary-strategies" class="p-4 bg-indigo-50 rounded-lg"></div>
                    </div>
                </div>

                <div class="prose max-w-none mt-12 pt-8 border-t-2">
                    <h2 class="text-2xl font-semibold">Graded Plan for Implementation</h2>
                    <p>Success isn't about doing everything at once. It's about making small, consistent changes. Follow this graded plan to integrate your chosen strategies without feeling overwhelmed.</p>
                    
                    <h4><strong>Weeks 1-2: Foundation & Focus</strong></h4>
                    <ul>
                        <li><strong>Action:</strong> Review this plan daily. Don't start everything yet. Just become familiar with it.</li>
                        <li><strong>Goal:</strong> Choose <strong>one or two</strong> of your most important strategies to focus on first. Pick the ones that seem most achievable and would have the biggest impact.</li>
                        <li><strong>Tip:</strong> Schedule time in your calendar to practice these new strategies (e.g., 15 minutes for a 'Pomodoro' work session).</li>
                    </ul>

                    <h4><strong>Weeks 3-5: Experiment & Adapt</strong></h4>
                    <ul>
                        <li><strong>Action:</strong> Actively implement your chosen 1-2 strategies. Treat it like a science experiment—you're just collecting data on what works for you.</li>
                        <li><strong>Goal:</strong> At the end of each week, jot down a few notes. What went well? What was difficult? Does the strategy need a small tweak to fit you better?</li>
                        <li><strong>Tip:</strong> Use a "body double"—study with a friend (in person or online) to stay on task. The mutual accountability can be very powerful.</li>
                    </ul>

                    <h4><strong>Weeks 6-8: Build & Expand (Mid-Semester Check-in)</strong></h4>
                    <ul>
                        <li><strong>Action:</strong> If your initial strategies are becoming habits, consider adding <strong>one</strong> more strategy from your list. If they are still a struggle, that's okay! Keep practicing and tweaking.</li>
                        <li><strong>Goal:</strong> Review your "Opportunities" list. Have your priorities changed? Are new challenges emerging as the semester gets harder? Adjust your focus accordingly.</li>
                        <li><strong>Tip:</strong> Visit your university's accessibility or student support services. Share your plan with them—they can offer additional resources and accountability.</li>
                    </ul>

                    <h4><strong>Weeks 9-12: Consolidate & Reflect</strong></h4>
                    <ul>
                        <li><strong>Action:</strong> Continue practicing your strategies, especially during high-stress periods like mid-terms and final projects.</li>
                        <li><strong>Goal:</strong> Acknowledge your progress! Notice the small wins. Did you start an essay earlier than usual? Did you feel more prepared for a seminar? Celebrate these successes.</li>
                        <li><strong>Tip:</strong> Revisit your "Strengths" list. Reminding yourself of your capabilities is a powerful motivator during challenging times.</li>
                    </ul>
                </div>

                 <div class="flex justify-between mt-8">
                    <button onclick="goToSection(4)" class="btn-secondary font-bold py-2 px-4 rounded-lg">&larr; Back to Strategies</button>
                    <button onclick="window.print()" class="btn-primary font-bold py-2 px-4 rounded-lg">Print or Save My Plan</button>
                </div>
            </section>
        </main>
    </div>

    <script>
        const appData = {
            profile: {},
            strengths: [],
            opportunities: [],
            myStrategies: []
        };

        const profileTraits = {
            "Task Initiation": { description: "Difficulty starting tasks, especially if they are large or boring.", value: 0, tags: ['planning', 'procrastination'] },
            "Sustained Attention": { description: "Trouble maintaining focus during lectures or long reading sessions.", value: 0, tags: ['focus'] },
            "Working Memory": { description: "Forgetting multi-step instructions or what was just read.", value: 0, tags: ['memory'] },
            "Planning & Prioritizing": { description: "Struggling to break down large assignments or decide what to do first.", value:0, tags: ['planning']},
            "Emotional Regulation": { description: "Feeling overwhelmed by stress, frustration, or academic setbacks.", value: 0, tags: ['emotional'] },
            "Cognitive Flexibility": { description: "Difficulty shifting between different subjects or ways of thinking.", value: 0, tags: ['flexibility'] },
            "Sensory Sensitivity": { description: "Feeling distracted or overwhelmed by noise, light, or crowds on campus.", value: 0, tags: ['sensory'] },
            "Social Communication": { description: "Finding group work, presentations, or social cues challenging.", value: 0, tags: ['social'] }
        };

        const allStrategies = [
            { id: 1, title: "The 5-Minute Rule", description: "Commit to working on a dreaded task for just five minutes. Often, starting is the hardest part. After five minutes, you can stop, but you'll likely find the momentum to continue.", tags: ['procrastination'] },
            { id: 2, title: "Pomodoro Technique", description: "Work in focused 25-minute intervals, separated by 5-minute breaks. After four 'pomodoros', take a longer break (15-30 minutes). This helps maintain focus and prevent burnout.", tags: ['focus', 'procrastination'] },
            { id: 3, title: "Visual Timers", description: "Use a physical or digital timer that shows the passage of time visually (like a Time Timer). This makes time feel more concrete and helps with time blindness.", tags: ['focus', 'planning'] },
            { id: 4, title: "Task Batching", description: "Group similar small tasks together and do them all at once. For example, answer all your emails in one block, or do all your readings for one class in a single session.", tags: ['planning'] },
            { id: 5, title: "Mind Mapping for Essays", description: "Instead of a linear outline, start with your main topic in the center and branch out with ideas, arguments, and evidence. This is great for visual thinkers.", tags: ['planning'] },
            { id: 6, title: "Body Doubling", description: "Work alongside another person, either in person or virtually. Their quiet presence provides external accountability and can help you stay on task.", tags: ['focus', 'procrastination'] },
            { id: 7, title: "Noise-Cancelling Headphones", description: "Invest in good headphones to block out distracting sounds in libraries, cafes, or dorms. Pair with ambient sounds or instrumental music if complete silence is unsettling.", tags: ['sensory', 'focus'] },
            { id: 8, title: "Speech-to-Text & Text-to-Speech", description: "If you struggle with writing, dictate your ideas using speech-to-text. If you struggle with reading, use text-to-speech to listen to articles and textbooks.", tags: ['memory', 'focus'] },
            { id: 9, title: "Structured Social Scripts", description: "For group work, prepare a few opening lines or questions beforehand. For example, 'What's the first step we should tackle?' or 'How should we divide the tasks?'. This reduces social anxiety.", tags: ['social'] },
            { id: 10, title: "Name the Emotion (RAIN)", description: "When feeling overwhelmed: Recognize what you're feeling. Allow the feeling to be there. Investigate with kindness. Nurture with self-compassion. This mindfulness technique can reduce emotional intensity.", tags: ['emotional'] },
            { id: 11, title: "Weekly Review", description: "At the end of each week, spend 20 minutes reviewing your calendar and to-do list for the upcoming week. This 'CEO meeting' with yourself helps you feel prepared and reduces Sunday anxiety.", tags: ['planning'] },
            { id: 12, title: "Designated Roles in Groups", description: "Suggest that your group assign clear roles (e.g., Notetaker, Timekeeper, Presenter, Researcher). This clarifies expectations and provides structure, which can ease communication challenges.", tags: ['social']}
        ];
        
        let profileChartInstance;
        let summaryChartInstance;

        function init() {
            const checklistContainer = document.getElementById('cognitive-checklist');
            Object.keys(profileTraits).forEach(key => {
                const trait = profileTraits[key];
                const div = document.createElement('div');
                div.className = 'flex items-start';
                div.innerHTML = `
                    <div class="flex items-center h-5">
                        <input id="trait-${key}" name="trait-${key}" type="checkbox" onchange="updateProfile('${key}')" class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded">
                    </div>
                    <div class="ml-3 text-sm">
                        <label for="trait-${key}" class="font-medium text-gray-700">${key}</label>
                        <p class="text-gray-500">${trait.description}</p>
                    </div>
                `;
                checklistContainer.appendChild(div);
            });
            renderProfileChart();
            goToSection(1);
        }

        function renderProfileChart() {
            const ctx = document.getElementById('profileChart').getContext('2d');
            const data = {
                labels: Object.keys(profileTraits),
                datasets: [{
                    label: 'My Profile',
                    data: Object.values(profileTraits).map(trait => trait.value),
                    fill: true,
                    backgroundColor: 'rgba(59, 130, 246, 0.2)',
                    borderColor: 'rgb(59, 130, 246)',
                    pointBackgroundColor: 'rgb(59, 130, 246)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgb(59, 130, 246)'
                }]
            };
            const options = {
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { display: false },
                        suggestedMin: 0,
                        suggestedMax: 1,
                        ticks: { display: false }
                    }
                },
                plugins: {
                    legend: { display: false }
                }
            };
            if (profileChartInstance) {
                profileChartInstance.destroy();
            }
            profileChartInstance = new Chart(ctx, { type: 'radar', data, options });
        }

        function renderSummaryChart() {
            const summaryCtx = document.getElementById('summaryChart').getContext('2d');
             const data = {
                labels: Object.keys(profileTraits),
                datasets: [{
                    label: 'My Profile',
                    data: Object.values(profileTraits).map(trait => trait.value),
                    fill: true,
                    backgroundColor: 'rgba(59, 130, 246, 0.2)',
                    borderColor: 'rgb(59, 130, 246)',
                    pointBackgroundColor: 'rgb(59, 130, 246)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgb(59, 130, 246)'
                }]
            };
            const options = {
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { display: false },
                        suggestedMin: 0,
                        suggestedMax: 1,
                        ticks: { display: false }
                    }
                },
                plugins: {
                    legend: { display: false }
                }
            };
            if (summaryChartInstance) {
                summaryChartInstance.destroy();
            }
            summaryChartInstance = new Chart(summaryCtx, { type: 'radar', data, options });
        }

        function updateProfile(key) {
            profileTraits[key].value = document.getElementById(`trait-${key}`).checked ? 1 : 0;
            renderProfileChart();
        }

        function addStrength() {
            const input = document.getElementById('strength-input');
            const list = document.getElementById('strengths-list');
            if (input.value.trim() !== "") {
                if (list.querySelector('.text-gray-500')) {
                    list.innerHTML = '';
                }
                appData.strengths.push(input.value.trim());
                const li = document.createElement('li');
                li.textContent = input.value.trim();
                list.appendChild(li);
                input.value = "";
            }
        }
        
        function addOpportunity() {
            const input = document.getElementById('opportunity-input');
            const list = document.getElementById('opportunities-list');
            if (input.value.trim() !== "") {
                if (list.querySelector('.text-gray-500')) {
                    list.innerHTML = '';
                }
                appData.opportunities.push(input.value.trim());
                const li = document.createElement('li');
                li.textContent = input.value.trim();
                list.appendChild(li);
                input.value = "";
            }
        }

        function updateStrategiesDisplay() {
            const container = document.getElementById('strategies-container');
            const selectedTags = new Set();
            Object.keys(profileTraits).forEach(key => {
                if(profileTraits[key].value === 1) {
                    profileTraits[key].tags.forEach(tag => selectedTags.add(tag));
                }
            });

            const relevantStrategies = allStrategies.filter(strategy => 
                strategy.tags.some(tag => selectedTags.has(tag))
            );

            if (relevantStrategies.length === 0) {
                container.innerHTML = `<p class="text-gray-600 text-center p-8 bg-gray-100 rounded-lg">No specific challenges selected in the 'Profile' section. Go back to Step 1 to select some traits to see tailored strategies!</p>`;
                return;
            }
            
            container.innerHTML = '';
            relevantStrategies.forEach(strategy => {
                const isSelected = appData.myStrategies.includes(strategy.id);
                const card = document.createElement('div');
                card.className = `border rounded-lg p-4 transition-all ${isSelected ? 'bg-indigo-100 border-indigo-400' : 'bg-white border-gray-200'}`;
                card.innerHTML = `
                    <div class="flex justify-between items-center">
                        <h4 class="text-lg font-semibold">${strategy.title}</h4>
                        <button onclick="toggleStrategy(${strategy.id})" class="text-sm font-medium py-1 px-3 rounded-full ${isSelected ? 'bg-red-500 text-white' : 'bg-green-500 text-white'}">
                            ${isSelected ? 'Remove from Plan' : 'Add to Plan'}
                        </button>
                    </div>
                    <p class="mt-2 text-gray-600">${strategy.description}</p>
                `;
                container.appendChild(card);
            });
        }

        function toggleStrategy(id) {
            const index = appData.myStrategies.indexOf(id);
            if (index > -1) {
                appData.myStrategies.splice(index, 1);
            } else {
                appData.myStrategies.push(id);
            }
            updateStrategiesDisplay();
        }

        function generateSummary() {
            const strengthsDiv = document.getElementById('summary-strengths');
            const opportunitiesDiv = document.getElementById('summary-opportunities');
            const strategiesDiv = document.getElementById('summary-strategies');

            strengthsDiv.innerHTML = appData.strengths.length ? `<ul class="list-disc list-inside">${appData.strengths.map(s => `<li>${s}</li>`).join('')}</ul>` : `<p class="text-gray-500">No strengths added.</p>`;
            opportunitiesDiv.innerHTML = appData.opportunities.length ? `<ul class="list-disc list-inside">${appData.opportunities.map(o => `<li>${o}</li>`).join('')}</ul>` : `<p class="text-gray-500">No opportunities added.</p>`;
            
            if (appData.myStrategies.length > 0) {
                strategiesDiv.innerHTML = `<div class="space-y-3">${appData.myStrategies.map(id => {
                    const strategy = allStrategies.find(s => s.id === id);
                    return `<div class="p-3 bg-white rounded shadow-sm">
                                <h5 class="font-semibold">${strategy.title}</h5>
                                <p class="text-sm text-gray-600">${strategy.description}</p>
                            </div>`;
                }).join('')}</div>`;
            } else {
                strategiesDiv.innerHTML = `<p class="text-gray-500">No strategies selected.</p>`;
            }

            renderSummaryChart();
        }

        function goToSection(sectionNumber) {
            document.querySelectorAll('main section').forEach(sec => sec.classList.add('hidden'));
            document.getElementById(`section-${sectionNumber}`).classList.remove('hidden');

            document.querySelectorAll('#steps-nav li').forEach((li, index) => {
                li.classList.remove('active', 'completed');
                if ((index + 1) < sectionNumber) {
                    li.classList.add('completed');
                } else if ((index + 1) === sectionNumber) {
                    li.classList.add('active');
                }
            });
            
            if (sectionNumber === 4) {
                updateStrategiesDisplay();
            } else if (sectionNumber === 5) {
                generateSummary();
            }
        }
        
        window.onload = init;
    </script>
</body>
</html>
